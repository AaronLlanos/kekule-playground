<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Testing</title>

    <script src="kekule.js/kekule.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/root.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/localization.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/common.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/data.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/core.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/html.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/io.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/render.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/widget.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/algorithm.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/chemWidget.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/calculation.min.js"></script><script type="text/javascript" src="http://organic.cpu.edu.cn/~partridge/Kekule.js/demos/composerButtons/kekule.js/kekule.loaded.js"></script><script type="text/javascript">if (this.Kekule) Kekule._loaded();</script>
    <link rel="stylesheet" href="./css/kekule.css">
    <script>
    var MySingleElectronAction = Kekule.Editor.createComposerIaControllerActionClass(
      'Kekule.Editor.ActionComposerSetAttachedMarkerIaControllerSingleElectron',
      'Single Electron',
      'Add single electron',
      'AttachedMarkerIaController',
      'AttachedMarkerIaController-SingleElectron',
      {
        'markerClassName': 'Kekule.ChemMarker.UnbondedElectronSet',
        'targetClassName': 'Kekule.AbstractAtom',
        'initialPropValues': {'electronCount': 1}
      },
      null, null,
      'singleElectron'
    );

    // initialize Composer
    Kekule.X.domReady(function(){
      var composer = Kekule.Widget.getWidgetById('composer');

      // bind event
      Kekule.Widget.getWidgetById('btnSetCustomButtons').on('execute', function(e){
        var BNS = Kekule.ChemWidget.ComponentWidgetNames;
        composer.setCommonToolButtons([BNS.undo, BNS.redo, BNS.zoomIn, BNS.zoomOut, BNS.objInspector]).setChemToolButtons([
          BNS.manipulate,
          BNS.erase,
          {'name': 'Custom', 'actionClass': Kekule.Editor.ActionOnComposerAdv,
            'text': 'Create', 'hint': 'My create button', 'id': 'btnMyCreate', 'htmlClass': 'MYBUTTON',
            'widget': Kekule.Widget.RadioButton,
            'attached': [
            BNS.molBondSingle, BNS.molBondDouble, BNS.molBondTriple,  //only show single, double and triple bounds
            /*  Hide other bond buttons

             BNS.molBondCloser, BNS.molBondWedgeUp, BNS.molBondWedgeDown,
             BNS.molRepMethane,
             BNS.molRepFischer1, BNS.molRepFischer2,
             BNS.molRepSawhorseStaggered, BNS.molRepSawhorseEclipsed
             */
            //{'name': BNS.molAtom, 'actionClass': Kekule.Editor.ActionComposerSetAtomController}
            BNS.molAtom
          ]},
          //BNS.molAtom,
          BNS.molFormula,
          BNS.molRing,
          {
            'name': BNS.molCharge,
            'attached': [
              BNS.molChargeClear,
              BNS.molChargePositive,
              BNS.molChargeNegative,
              //BNS.molElectronLonePair,
              {
                'name': 'singleElectron', 'actionClass': MySingleElectronAction
              }
            ]
          }
          // BNS.molCharge,
          // BNS.textImage
        ]);
      });
      Kekule.Widget.getWidgetById('btnReset').on('execute', function(e){
        composer.setCommonToolButtons(null).setChemToolButtons(null);
      });
    });
  </script>
  </head>
  <body>
    <div id="toolbar" data-widget="Kekule.Widget.ButtonGroup">
      <button id="btnSetCustomButtons" data-widget="Kekule.Widget.Button" data-text="Set Custom Chem Tools"></button>
      <button id="btnReset" data-widget="Kekule.Widget.Button" data-text="Reset Chem Tools"></button>
    </div>
    <div id="composer" data-widget="Kekule.Editor.Composer"></div>

    <!--<script type="text/javascript" src="./index.js"></script>-->
  </body>
</html>
